FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IHZpcnR1YWxtYWNoaW5lLWFwYgpkZXNjcmlwdGlvbjogQVBCIGZv\
ciBtYW5hZ2luZyBWaXJ0dWFsIE1hY2hpbmUKYmluZGFibGU6IEZhbHNlCmFzeW5jOiBvcHRpb25h\
bAp0YWdzOgogIC0gdmlydHVhbGl6YXRpb24KbWV0YWRhdGE6CiAgZGlzcGxheU5hbWU6IFZpcnR1\
YWwgTWFjaGluZSAoQVBCKQogIGltYWdlVXJsOiBodHRwczovL2Nkbi5wYnJkLmNvL2ltYWdlcy9I\
NUd1dGQ3LnBuZwpwbGFuczoKICAtIG5hbWU6IGRlZmF1bHQKICAgIGRlc2NyaXB0aW9uOiBWaXJ0\
dWFsIG1hY2hpbmUgY3JlYXRlZCBmcm9tIGN1c3RvbSBZQU1MCiAgICBmcmVlOiBUcnVlCiAgICBt\
ZXRhZGF0YToKICAgICAgZGlzcGxheU5hbWU6IEN1c3RvbSBZQU1MCiAgICAgIGxvbmdEZXNjcmlw\
dGlvbjogVmlydHVhbCBtYWNoaW5lIGNyZWF0ZWQgZnJvbSBjdXN0b20gWUFNTAogICAgcGFyYW1l\
dGVyczoKICAgICAgLSBuYW1lOiBhZG1pbl91c2VyCiAgICAgICAgdGl0bGU6IE9wZW5zaGlmdCBB\
ZG1pbiBVc2VyCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAg\
ICAgLSBuYW1lOiBhZG1pbl9wYXNzd29yZAogICAgICAgIHRpdGxlOiBPcGVuc2hpZnQgQWRtaW4g\
UGFzc3dvcmQKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBkaXNwbGF5X3R5cGU6IHBhc3N3\
b3JkCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgLSBuYW1lOiBjdXN0b21feWFtbAogICAg\
ICAgIHRpdGxlOiBDdXN0b20gY29uZmlndXJhdGlvbiAoWUFNTCkKICAgICAgICB0eXBlOiBzdHJp\
bmcKICAgICAgICBkaXNwbGF5X3R5cGU6IHRleHRhcmVhCiAgICAgICAgcmVxdWlyZWQ6IHRydWUK\
CiAgLSBuYW1lOiBsaW51eAogICAgZGVzY3JpcHRpb246IExpbnV4IFZpcnR1YWwgTWFjaGluZSBE\
ZXBsb3ltZW50CiAgICBmcmVlOiBUcnVlCiAgICBtZXRhZGF0YToKICAgICAgZGlzcGxheU5hbWU6\
IExpbnV4IFZpcnR1YWwgTWFjaGluZQogICAgICBsb25nRGVzY3JpcHRpb246IFZpcnR1YWwgbWFj\
aGluZSB3aXRoIHByZS1pbnN0YWxsZWQgTGludXgKICAgIHBhcmFtZXRlcnM6CiAgICAgIC0gbmFt\
ZTogYWRtaW5fdXNlcgogICAgICAgIHRpdGxlOiBPcGVuc2hpZnQgQWRtaW4gVXNlcgogICAgICAg\
IHR5cGU6IHN0cmluZwogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgIC0gbmFtZTogYWRtaW5f\
cGFzc3dvcmQKICAgICAgICB0aXRsZTogT3BlbnNoaWZ0IEFkbWluIFBhc3N3b3JkCiAgICAgICAg\
dHlwZTogc3RyaW5nCiAgICAgICAgZGlzcGxheV90eXBlOiBwYXNzd29yZAogICAgICAgIHJlcXVp\
cmVkOiB0cnVlCiAgICAgIC0gbmFtZTogdm1uYW1lCiAgICAgICAgdGl0bGU6IE5hbWUKICAgICAg\
ICB0eXBlOiBzdHJpbmcKICAgICAgICBkaXNwbGF5X3R5cGU6IHRleHQKICAgICAgICByZXF1aXJl\
ZDogdHJ1ZQogICAgICAgIGRlZmF1bHQ6IG15dm0KICAgICAgLSBuYW1lOiB2bW1lbW9yeQogICAg\
ICAgIHRpdGxlOiBNZW1vcnkgKGluIE1pQikKICAgICAgICB0eXBlOiBudW1iZXIKICAgICAgICBy\
ZXF1aXJlZDogdHJ1ZQogICAgICAgIGRlZmF1bHQ6IDY0CiAgICAgIC0gbmFtZTogdm1kaXNraW1h\
Z2UKICAgICAgICB0aXRsZTogRGlzayBJbWFnZQogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAg\
IHJlcXVpcmVkOiB0cnVlCiAgICAgICAgZGVmYXVsdDoga3ViZXZpcnQvZmVkb3JhLWNsb3VkLXJl\
Z2lzdHJ5LWRpc2stZGVtbzpsYXRlc3QK"









COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
